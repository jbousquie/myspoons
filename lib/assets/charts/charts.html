<!DOCTYPE html>
<html>
    <head>
        <title>Charts</title>
        <meta charset="utf-8">
        
        <script src="chart.umd.min.js"></script>
        <script src="chartjs-plugin-datalabels.min.js"></script>
        <script src="chartjs-adapter-date-fns.bundle.min.js"></script>
        <script src="mycharts.js"></script>
        
    </head>
    <style>
        #title {
            font-size: 4em;
            color: grey;
            text-align: center;
            margin-top: 20px;
            margin-bottom: 60px;
        }
        #description {
            font-size: 2.5em;
            color: dimgray;
            margin-top: 50px;
        }
    </style>
    <body>
        <div id="title"></div>
       <canvas id="chartCanvas" width="400" height="400" role="img" aria-label="Spoon Charts">
            <p>Spoon Charts</p>
        </canvas>
        <div id="description"></div>
    </body>
    <script>
        
        const dataString = "Timestamp;WeekDay;EnergyRate;SpoonNb;maxSpoonNb;Comment\n\
2022-12-02 10:23:23;5;45;5;10;faim sommeil\n\
2022-12-02 10:28:34;5;26;3;10;réunion\n\
2022-12-02 10:32:39;5;73;7;10;marche soleil\n\
2022-12-02 10:36:44;5;58;6;10;repas\n\
2022-12-02 10:48:39;5;87;9;10;sieste\n\
2022-12-02 10:52:45;5;40;4;10;téléphone\n\
2022-12-04 11:10:23;7;45;5;10;faim sommeil\n\
2022-12-04 11:23:34;7;26;3;10;réunion\n\
2022-12-04 11:28:39;7;73;7;10;marche soleil\n\
2022-12-04 11:35:44;7;58;6;10;repas\n\
2022-12-04 11:45:39;7;87;9;10;sieste\n\
2022-12-04 11:55:45;7;40;4;10;téléphone\n\
2022-12-06 12:01:23;2;45;5;10;faim sommeil\n\
2022-12-06 12:10:34;2;26;3;10;réunion\n\
2022-12-06 12:20:39;2;73;7;10;marche soleil\n\
2022-12-06 12:30:44;2;58;6;10;repas\n\
2022-12-06 12:40:39;2;87;9;10;sieste\n\
2022-12-06 12:50:45;2;40;4;10;téléphone\n\
2022-12-08 14:10:23;4;45;5;10;faim sommeil\n\
2022-12-08 14:20:34;4;26;3;10;réunion\n\
2022-12-08 14:30:39;4;73;7;10;marche soleil\n\
2022-12-08 14:32:44;4;58;6;10;repas\n\
2022-12-08 14:40:39;4;87;9;10;sieste\n\
2022-12-08 14:50:45;4;40;4;10;téléphone\n\
2022-12-10 15:28:48;6;46;5;10;bruit\n";

        
        const en = {
            'chartsmenu_chart1': 'Event Gains and Losses',
            'chartsmenu_chart2': 'Event Frequencies',
            'chartsmenu_chart3': 'Event Rates',
            'chartsmenu_chart4': 'Gains And Losses By Day Of the Week',
            'chartsmenu_chart5': 'Event Number By Day Of The Week',
            'chartsmenu_chart6': 'Gains And Losses By Hour',
            'chartsmenu_chart7': 'Event Number By Hour',
            'chartsmenu_chart8': 'Energy Evolution through Time',
            'chartsmenu_chart9': 'Energy Evolution through Event Occurrences',
            'chart1_descr':
            'This chart displays the gains and losses of energy by event type.<br><br>The displayed values are a computation from the frequency and the intensity of each event type.',
        'chart2_descr':
            'This chart displays the event type frequencies.<br>The bigger the bar, the most of the time the event type occurs.<br><br>The displayed values are the average intensity of each event type.',
        'chart3_descr':
            'This chart displays the event type intensities.<br>The bigger the bar, the more intense the event type.<br><br>The displayed values are the average occurrence numbers of each event type.',
        'chart4_descr':
            'This chart displays the gains and losses of energy by day of the week.<br>The bigger the bar, the bigger the gain or the loss.<br><br>The displayed values are the cumulation of the gain and loss intensities.',
        'chart5_descr':
            'This chart displays the number of events by day of the week.<br>The bigger the bar, the more numerous the events.<br><br>The displayed values are the cumulation of event numbers.',
        'chart6_descr':
            'This chart displays the gains and losses of energy by hour.<br>The bigger the bar, the bigger the gain or the loss.<br><br>The displayed values are the cumulation of gain and loss intensities by hour.',
        'chart7_descr':
            'This chart displays the number of events by hour.<br>The bigger the bar, the more numerous the events.<br><br>The displayed values are the cumulation of event numbers by hour.',
        'chart8_descr':
            'This chart displays the evolution of the energy through time.<br><br>The event names are displayed on each energy level reached.',
        'chart9_descr':
            'This chart displays the evolution of the energy through event occurences, no matter the elapsed time between them.<br><br>The event names are displayed on each energy level reached.',
        };
        
        const enMap = {
            'week_labels': [
              'Monday',
              'Tuesday',
              'Wednesday',
              'Thursday',
              'Friday',
              'Saturday',
              'Sunday'
            ]
          };

        const fr = {
            'chartsmenu_chart1': 'Gains et pertes par situation',
            'chartsmenu_chart2': 'Fréquence des situations',
            'chartsmenu_chart3': 'Intensité des situations',
            'chartsmenu_chart4': 'Gains et pertes par jour de la semaine',
            'chartsmenu_chart5': 'Nombre de situations par jour de la semaine',
            'chartsmenu_chart6': 'Gains et pertes par heure',
            'chartsmenu_chart7': 'Nombre de situations par heure',
            'chartsmenu_chart8': "Évolution de l'énergie au cours du temps",
            'chartsmenu_chart9': "Évolution de l'énergie en fonction des situations",    
            'chart1_descr':
            "Ce graphique affiche les gains et pertes d'énergie par type de situation.<br>Les valeurs affichées sont une combinaison de la fréquence et l'intensité de chaque type de situation.",
        'chart2_descr':
            "Ce graphique affiche les fréquences de chaque type de situation.<br>Plus une barre est longue, plus une situation arrive souvent.<br><br>Les valeurs affichées sont les intensités moyennes de chaque type de situation.",
        'chart3_descr':
            "Ce graphique affiche les intensités de chaque type de situation.<br>Plus une barre est longue, plus une situation est intense.<br><br>Les valeurs affichées sont les nombres moyens de survenue de chaque type de situation.",
        'chart4_descr':
            "Ce graphique affiche les gains et pertes d'énergie par jour de la semaine.<br>Plus une barre est longue, plus une perte ou un gain est important.<br><br>Les valeurs affichées sont les cumuls des intensités des pertes ou des gains.",
        'chart5_descr':
            "Ce graphique affiche les nombres de situations par jour de la semaine.<br>Plus une barre est longue, plus le nombre de situations est important.<br><br>Les valeurs affichées sont les cumuls des nombres de situations par jour de la semaine.",
        'chart6_descr':
            "Ce graphique affiche les gains et pertes d'énergie par heure.<br>Plus une barre est longue, plus une perte ou un gain est important.<br><br>Les valeurs affichées sont les cumuls des intensités des pertes ou des gains par heure.",
        'chart7_descr':
            "Ce graphique affiche le nombre de situations survenues par heure.<br>Plus une barre est longue, plus le nombre de situations est important.<br><br>Les valeurs affichées sont les cumuls des nombres de situations par heure.",
        'chart8_descr':
            "Ce graphique affiche l'évolution de l'énergie au cours du temps.<br><br>Les noms des situations ayant amené à chaque niveau d'énergie sont affichés.",
        'chart9_descr':
            "Ce graphique affiche l'évolution de l'énergie au cours des survenues des situations, indépendamment des périodes de temps écoulées entre elles.<br><br>Les noms des situations ayant amené à chaque niveau d'énergie sont affichés.",        
        };

        const frMap = {
            'week_labels': [
              'Lundi',
              'Mardi',
              'Mercredi',
              'Jeudi',
              'Vendredi',
              'Samedi',
              'Dimanche'
            ]
          };

        const lexicon = {'en': en, 'fr': fr};
        const maps = {'en': enMap, 'fr': frMap};

        const chartTypes = [
          {title: '', descr: ''},
          {title: 'chartsmenu_chart1', descr: 'chart1_descr'},
          {title: 'chartsmenu_chart2', descr: 'chart2_descr'},
          {title: 'chartsmenu_chart3', descr: 'chart3_descr'},
          {title: 'chartsmenu_chart4', descr: 'chart4_descr'},
          {title: 'chartsmenu_chart5', descr: 'chart5_descr'},
          {title: 'chartsmenu_chart6', descr: 'chart6_descr'},
          {title: 'chartsmenu_chart7', descr: 'chart7_descr'},
          {title: 'chartsmenu_chart8', descr: 'chart8_descr'},
          {title: 'chartsmenu_chart9', descr: 'chart9_descr'}
        ];


        const language = 'en';
        const chartType = 4;



        const lx = lexicon[language];
        var labelString = '';
        if (chartType == 4 || chartType == 5) {
            const labels = maps[language]['week_labels'];
            labelString = JSON.stringify(labels);
        }



        const titleName = chartTypes[chartType]['title'];
        const descrName = chartTypes[chartType]['descr'];

        const title = lx[titleName];
        const description = lx[descrName];
        var init = function(chartType, maxSpoonNb, dataString, labelString, title, description) {
            var ctx = document.getElementById("chartCanvas");
            var myChart = new MyChart(ctx, maxSpoonNb, dataString);
            myChart.display(chartType, labelString, title, description);
        };
        
        init(chartType, 10, dataString, labelString, title, description);
    </script>
</html>